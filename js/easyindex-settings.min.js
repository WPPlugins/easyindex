/*!  */
/*! Copyright (c) 2011-2014 Felix Gnass */
!function(t){"use strict";var e=function(){function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){var e,i;for(e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var o,r,s,a,l;return o=["opacity",e,~~(100*t),i,n].join("-"),r=.01+i/n*100,s=Math.max(1-(1-t)/e*(100-r),t),a=f.substring(0,f.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"",p[o]||(c.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",c.cssRules.length),p[o]=1),o}function n(t,e){var i,n,o;for(i=t.style,e=e.charAt(0).toUpperCase()+e.slice(1),o=0;o<h.length;o++)if(n=h[o]+e,void 0!==i[n])return n;if(void 0!==i[e])return e}function o(t,e){var i;for(i in e)t.style[n(t,i)||i]=e[i];return t}function r(t){var e,i,n;for(i=1;i<arguments.length;i++){n=arguments[i];for(e in n)void 0===t[e]&&(t[e]=n[e])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=r(t||{},a.defaults,u)}function l(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}c.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,n){function r(){return o(i("group",{coordsize:h+" "+h,coordorigin:-c+" "+-c}),{width:h,height:h})}function a(t,a,l){e(d,e(o(r(),{rotation:360/n.lines*t+"deg",left:~~a}),e(o(i("roundrect",{arcsize:n.corners}),{width:c,height:n.width,left:n.radius,top:-n.width>>1,filter:l}),i("fill",{color:s(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l,d,u,c=n.length+n.width,h=2*c;if(l=2*-(n.width+n.length)+"px",d=o(r(),{position:"absolute",top:l,left:l}),n.shadow)for(u=1;u<=n.lines;u++)a(u,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(u=1;u<=n.lines;u++)a(u);return e(t,d)},a.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var d,u,c,h,p,f;return h=["webkit","Moz","ms","O"],p={},c=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}(),u={},a.defaults={},r(a.prototype,{spin:function(e){var i,n,r,s,a,l,d,u,c,h,p;return this.stop(),u=this,c=u.opts,h=u.el=o(t(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex}),p=c.radius+c.length+c.width,o(h,{left:c.left,top:c.top}),e&&e.insertBefore(h,e.firstChild||null),h.setAttribute("role","progressbar"),u.lines(h,u.opts),f||(i=0,n=(c.lines-1)*(1-c.direction)/2,s=c.fps,a=s/c.speed,l=(1-c.opacity)/(a*c.trail/100),d=a/c.lines,function m(){var t;for(i++,t=0;t<c.lines;t++)r=Math.max(1-(i+(c.lines-t)*d)%a*l,c.opacity),u.opacity(h,t*c.direction+n,r,c);u.timeout=u.el&&setTimeout(m,~~(1e3/s))}()),u},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,r){function a(e,i){return o(t(),{position:"absolute",width:r.length+r.width+"px",height:r.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*l+r.rotate)+"deg) translate("+r.radius+"px,0)",borderRadius:(r.corners*r.width>>1)+"px"})}var l,d,u;for(l=0,d=(r.lines-1)*(1-r.direction)/2;l<r.lines;l++)u=o(t(),{position:"absolute",top:1+~(r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:f&&i(r.opacity,r.trail,d+l*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(u,o(a("#000","0 0 4px #000"),{top:"2px"})),e(n,e(u,a(s(r.color,l),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),d=o(t("group"),{behavior:"url(#default#VML)"}),!n(d,"transform")&&d.adj?l():f=n(d,"animation"),a}();t.widget("easy.Spinner",{_spinner:!1,_presets:{teensy:{lines:9,length:3,width:1,radius:1,corners:0},tiny:{lines:9,length:4,width:1,radius:3},small:{lines:11,length:4,width:2,radius:5},large:{lines:10,length:8,width:4,radius:8}},options:{lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.1,fps:20,zIndex:2e9,className:"jqspinner",top:"50%",left:"50%",position:"absolute",autostart:!1,preset:""},_create:function(){this._spinner&&(this._stop(),delete this._spinner),this._presets[this.options.preset]&&t.extend(this.options,this._presets[this.options.preset]),this._spinner=new e(this.options),this.options.autostart&&this.spin()},spin:function(){this._spinner.spin(this.element[0])},stop:function(){this._spinner.stop()}})}(jQuery),/*!  */
function(t){function e(t){t.data.clear.off(i,e),t.data.errDiv.dialog("destroy"),t.data.errDiv.remove()}var i="focus",n="left",o="right";t.fn.showError=function(r,s){var a,l,d,u,c,h,p,f,m,g,v;for(s=s||{},s.clear=s.clear||[],"string"==typeof s.clear&&(s.clear=[s.clear]),p=t("#divShowError"),0===p.length&&(p=t('<div id="divShowError"></div>').appendTo("#easyindexUI")),h=this,a={position:o,container:null,clear:[]},t.extend(a,s),u=0;u<a.clear.length;u++)h=h.add(a.clear[u]);c='<span class="showError showError-'+a.position+'">',c+='<div class="showErrorLeftPtr"></div><div class="showErrorMsg">'+r,c+='</div><div class="showErrorRightPtr"></div></span>',c=t(c),d=a.position===n?{my:o,at:n,of:this}:{my:n,at:o,of:this},c.dialog({dialogClass:"showErrorDialog",draggable:!1,resizable:!1,autoOpen:!1,appendTo:p,closeText:"",width:"auto",position:d}),s.zIndex&&p.css("zIndex",s.zIndex),c.dialog("open"),"1.10.3"==t.ui.version&&(f=c.dialog("widget"),m=this.offset(),g=m.top+this.outerHeight()/2-12,v=m.left,l=c.outerWidth(),"right"===a.position?v+=this.outerWidth():v-=l,f.css({position:"absolute",top:g+"px",left:v+"px"})),h.on(i,{clear:h,errDiv:c},e)},t.fn.showErrorLeft=function(t,e){e=e||{},e.position=n,this.showError(t,e)},t.fn.showErrorRight=function(t,e){e=e||{},e.position=o,this.showError(t,e)}}(jQuery),/*!  */
window.EASYINDEX=window.EASYINDEX||{},function(t){"use strict";function e(t){O.tabs("option","active",t)}function i(e,i){var n=i.newTab?i.newTab.find("a"):t(i.tab).find("a");n.hasClass("NoSave")?R.hide():R.show(),st=n.attr("href").replace("#divEIS","")}function n(){var e=/^\d+$/,i=t.trim(L.val());return L.val(i),!(!e.test(i)||i<2)||(L.showErrorRight("Must be a number 2 or greater"),!1)}function o(){return""!==t.trim(M.val())||(M.showErrorRight("Please enter your first name"),!1)}function r(){return!!J.test(t.trim(U.val()))||(U.showErrorRight("Oops! This doesn't seem to be a valid email address"),!1)}function s(){return""!==t.trim(k.val())||(k.showErrorRight("Please tell us about the problem"),!1)}function a(e){var i,n,o;if(D.hide(),e.status&&"OK"===e.status)t("#tdEISendSupport").html(e.html);else{for(T.show(),n=t("#EIDErrors",S),n.empty(),o=e.errors&&e.errors.length?e.errors.length:0,i=0;i<o;i++)n.append(t("<p>"+e.errors[i]+"</p>"));S.show()}}function l(e){var i,n;e.preventDefault(),t(".showError").dialog("destroy").remove(),n=o(),n=r()&&n,n=s()&&n,n&&(i={action:"easyindexSupport",name:encodeURIComponent(t.trim(M.val())),email:encodeURIComponent(t.trim(U.val())),subject:encodeURIComponent(t.trim(t("#inpEIDSubject").val())),message:encodeURIComponent(t.trim(k.val())),sendDiagnostics:t("#cbEIDSendDiagnostics").attr("checked")},T.hide(),S.hide(),D.show(),t.post(ajaxurl,i,a,"json"))}function d(i,n){var o=t.trim(j.val());return""===o||J.test(o)?!n||""!==o||(e(nt),j.showErrorRight("You need to tell us your email address",{clear:"#cbEISSubscribe"}),!1):(e(nt),j.showErrorRight("Oops! This doesn't seem to be a valid email address",{clear:"#cbEISSubscribe"}),!1)}function u(){var e=t.trim(_.val());return""===e&&(e="0"),_.val(e),!!/^\d+$/.test(e)||(_.showErrorRight("Memory must be numeric"),!1)}function c(e){var i,o=!0;t(".showError").dialog("destroy").remove(),o=checkLicenseKey()&&o,o=n()&&o,o=u()&&o,o?(ot=!1,i=t(e.target),i.attr("action",i.attr("action")+"#"+rt[st])):e.preventDefault()}function h(e){var i;return"OK"!==e.status?void window.alert("Oops! Something went wrong!\n"+e.error):(i=e.taxonomy+"-"+e.termID,t("#imgEISTermThumb-"+i).attr("src",e.thumb),void t("#inpEISTermThumb-"+i).val(e.src))}function p(e,i,n){var o={action:"easyindexTermThumb",taxonomy:i,termID:e,src:n};t("#imgEISTermThumb-"+i+"-"+e).attr("src",EASYINDEX.pluginUrl+"/images/spinner100.gif"),t.post(ajaxurl,o,h,"json")}function f(t){var e,i,n=/^imgEISTermThumb-(.+)-(\d+)$/,o=n.exec(t.target.id);return null!==o&&(i=o[1],e=o[2],t.preventDefault(),H||(H=wp.media({title:"Media Manager",library:{type:"image"},button:{text:"Select as thumb"},multiple:!1})),H.off("select"),H.on("select",function(){var t=H.state().get("selection").first().toJSON();p(e,i,t.url)}),H.open(),!1)}function m(){C.hide(),t("#taxonomy_"+this.value).show()}function g(t){var i;t.target.hash&&(i=t.target.hash.substr(1),rt[i]&&e(rt[i]))}function v(){P.html("Done")}function w(e){e.preventDefault(),B.hide(),P.show(),t.post(ajaxurl,{action:"easyindexResetSlugs"},v,"json")}function y(){Y.html("Done")}function E(e){e.preventDefault(),$.hide(),Y.show(),t.post(ajaxurl,{action:"easyindexCountTaxonomies"},y,"json")}function b(e){var i;it=!1,K.Spinner("stop"),i=t("#divEISGeneral").find('input[name="EasyIndex[bgGeneration]"]'),"OK"==e.status?(Q.show(),i.attr("checked",!0)):(V.show(),i.attr("checked",!1))}function I(e){var i;e.preventDefault(),it||(it=!0,K.Spinner("spin"),Q.hide(),V.hide(),i={action:"easyindexGenerateThumbs",check:!0},T.hide(),S.hide(),D.show(),t.post(ajaxurl,i,b,"json"))}function x(){W.prop("checked")?(F.show(),q.hide()):(F.hide(),q.show())}var S,T,D,R,j,z,N,C,O,_,k,M,U,A,G,L,B,$,P,Y,K,X,Q,V,W,F,q,H,J=/^(?:[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+(?:\.[a-z0-9!#$%&'*+\/=?\^_`{|}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)$/i,Z=/#(.*)$/,tt="click",et="change",it=!1,nt=0,ot=!1,rt={General:0,Thumbnails:1,Nerdy:2,Support:3},st="General";t(function(){var a;G=EASYINDEX,t(window).on("beforeunload",function(){if(ot)return"You have unsaved changes!"}),z=t("#easyindexUpgrade"),T=t("#btnEISendSupport"),O=t("#divEISTabs"),R=t("#divEISSave").find("button").button(),T.button().on(tt,l),B=t("#btnEIResetSlugs").button().on(tt,w),P=t("#divEISlugWait"),$=t("#btnEITaxonomyCount").button().on(tt,E),Y=t("#divEITaxWait"),t("#btnEISTestBackground").button().on(tt,I),O.tabs({active:window.location.hash?parseInt(window.location.hash.replace("#",""),10):0,beforeActivate:i,create:i}),A=t("#spnEISLatestVersion"),N=t("#spnEISVersionSpin"),A.hide(),N.hide(),A.delegate("a",tt,g),K=t("#spnEISBGSpin").Spinner({preset:"tiny",autostart:!1}),Q=t("#spnEISBGOK"),V=t("#spnEISBGFAIL"),S=t("#EIDFail"),D=t("#EIDSending"),j=t('.EISSubscribe input[name="ERPlusSettings[erEmailAddress]"]').on(et,d),_=t("#inpEISMemory").on(et,u),X=t("#frmEISForm"),X.on("submit",c),M=t("#inpEIDName").on(et,o),U=t("#inpEIDEmail").on(et,r),k=t("#inpEIDProblem").on(et,s),L=t('input[name="EasyIndex[generatorTimeout]"]').on(et,n),W=t("#bgGeneration").on(et,x),F=t("#bgTOExplain"),q=t("#fgTOExplain"),G.jQuery=t,C=t(".EISTaxonomy"),t("#selEISTaxonomy").on(et,m),z.dialog({autoOpen:!1,width:420,modal:!0,dialogClass:"easyindexUpgrade",close:function(){t(".easyindexUpgrade").filter(function(){return""===t(this).text()}).remove()},open:function(){t(".ui-widget-overlay").wrap('<div class="easyindexUI" />')}}),z.parent(".ui-dialog").wrap('<div class="easyindexUI" />'),t("#divEISTermThumbs").on(tt,"img",f),O.show(),a=Z.exec(window.location.href),null!==a&&rt[a[1]]&&e(rt[a[1]])})}(jQuery);